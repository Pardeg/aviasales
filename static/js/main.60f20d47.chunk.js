(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],{33:function(e,t,n){e.exports=n.p+"static/media/Checkbox.fc4db7ee.svg"},34:function(e,t,n){e.exports=n.p+"static/media/Form.74238712.svg"},35:function(e,t,n){e.exports=n.p+"static/media/mainLogo.0c089234.svg"},39:function(e,t,n){e.exports=n(64)},64:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(27),o=n.n(a),i=n(6),u=n(7),l=n(11),s=n(8),f=n.n(s),d=n(12),p=n(9),h=n(28),m=n(38),g=n(37),x=n(13),b=n.n(x),k=n(29),v=n(2),y=n(1);function E(){var e=Object(v.a)(["\nmargin-top:20px;\nmargin-bottom:20px;\n"]);return E=function(){return e},e}function j(){var e=Object(v.a)(["\ndisplay: flex;\njustify-content: flex-start;\nfont-size: 12px;\ncolor: #A0B0B9;\nmargin-top: 75px;\n"]);return j=function(){return e},e}function O(){var e=Object(v.a)(["\ndisplay: flex;\nflex-direction: column;\n"]);return O=function(){return e},e}function w(){var e=Object(v.a)(["\ndisplay: flex;\nflex-direction: column;\n"]);return w=function(){return e},e}function B(){var e=Object(v.a)(["\nfont-size: 14px;\nmargin-bottom: 10px;\n"]);return B=function(){return e},e}function F(){var e=Object(v.a)(["\ndisplay: flex;\njustify-content: flex-start;\nfont-size: 12px;\ncolor: #A0B0B9;\n"]);return F=function(){return e},e}function S(){var e=Object(v.a)(["\nfont-size: 24px;\ncolor:#2196F3;\n"]);return S=function(){return e},e}function T(){var e=Object(v.a)(["\ndisplay:flex;\nflex-direction:column;\nalign-items: left;\n"]);return T=function(){return e},e}function C(){var e=Object(v.a)(["\ndisplay: flex;\nflex-direction: row;\njustify-content: space-between;\nwidth: 502px;\nheight:184px;\npadding: 20px;\nbackground-color: #FFFFFF;\nmargin-bottom: 20px;\nfont-weight: 600;\nbox-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\nborder-radius: 5px;\n"]);return C=function(){return e},e}function P(){var e=Object(v.a)(["\ndisplay: flex:\nflex-direction: column;\n"]);return P=function(){return e},e}var I=y.default.div(P()),z=y.default.div(C()),D=y.default.div(T()),A=y.default.p(S()),N=y.default.span(F()),_=y.default.span(B()),H=y.default.div(w()),J=y.default.div(O()),L=y.default.span(j()),M=y.default.img(E()),U=n(15),q=n(66),W=n(67),G=n(68),K=function e(){Object(p.a)(this,e),this.stopsCounter=function(e){return 0===e.length?"\u0411\u0415\u0417 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a":1===e.length?"1 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0410":"".concat(e.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418")},this.stopsName=function(e){return 1===e.length?"".concat(e):2===e.length?"".concat(e[0],",").concat(e[1]):3===e.length?"".concat(e[0],",").concat(e[1],",").concat(e[2]):void 0},this.timeHelper=function(e,t){var n="0".concat(Object(q.a)(new Date(e))).slice(-2),r="0".concat(Object(W.a)(new Date(e))).slice(-2),c=Object(U.a)(new Date(e),t),a="0".concat(Object(q.a)(new Date(c))).slice(-2),o="0".concat(Object(W.a)(new Date(c))).slice(-2);return"".concat(n,":").concat(r," -").concat(a,":").concat(o)},this.flightTimeCounter=function(e,t){var n=new Date(e),r=Object(U.a)(n,t),c=Object(G.a)(r,n),a="".concat(Math.floor(c/60)),o="".concat(c%60);return"".concat(a,"\u0447 ").concat(o,"\u043c")}},Q=function(e){var t=new K,n=e.tickets,r=e.filters,a=n.filter((function(e){return r.includes(String(e.segments[0].stops.length))||r.includes(String(e.segments[0].stops.length))||r.includes("4")?e:null}));return c.a.createElement(I,null,a.map((function(e){var n=e.price,r=e.carrier,a=e.segments;return c.a.createElement(z,{key:k.uniqueId()},c.a.createElement(D,null,c.a.createElement(A,null,n.toLocaleString("ru")," P"),c.a.createElement(N,null,a[0].origin,"-",a[0].destination),c.a.createElement(_,null,t.timeHelper(a[0].date,a[0].duration)),c.a.createElement(N,null,a[1].origin,"-",a[1].destination),c.a.createElement(_,null,t.timeHelper(a[1].date,a[1].duration))),c.a.createElement(H,null,c.a.createElement(L,null,"\u0412 \u041f\u0423\u0422\u0418"),c.a.createElement(_,null,t.flightTimeCounter(a[0].date,a[0].duration)),c.a.createElement(N,null,"\u0412 \u041f\u0423\u0422\u0418"),c.a.createElement(_,null,t.flightTimeCounter(a[1].date,a[1].duration))),c.a.createElement(J,null,c.a.createElement(M,{src:"https://pics.avs.io/99/36/".concat(r,".png")}),c.a.createElement(N,null,t.stopsCounter(a[0].stops)),c.a.createElement(_,null,t.stopsName(a[0].stops)),c.a.createElement(N,null,t.stopsCounter(a[1].stops)),c.a.createElement(_,null,t.stopsName(a[1].stops))))})))},R=Q;Q.defaultProps={tickets:[],filters:[]};var V=n(33),X=n.n(V),Y=n(34),Z=n.n(Y);function $(){var e=Object(v.a)(['\ndisplay: flex;\nalign-items: center;\nmargin-bottom: 20px;\nfont-size: 13px;\nfont-weight: 600;\ncursor: pointer;\nvertical-align: center;\n&:before {\ncontent: "";\ndisplay:inline-block;\nwidth: 20px;\nheight: 20px;\nmargin-right: 10px;\nbackground-image: ',";\nbackground-position: center;\nbackground-repeat: no-repeat;\n}\n"]);return $=function(){return e},e}function ee(){var e=Object(v.a)(["\nfont-size: 12px;\nheight: 13px;\nfont-weight: 600;\n"]);return ee=function(){return e},e}function te(){var e=Object(v.a)(["\ndisplay: none;\n"]);return te=function(){return e},e}function ne(){var e=Object(v.a)(["\ndisplay: flex;\nWidth:232px;\nheight: 252px;\nmargin-right: 20px;\nmargin-top: 190px;\npadding-left: 20px;\npadding-right: 20px;\nborder-radius: 5px;\nflex-direction: column;\njustify-content: start;\nbox-sizing: border-box;\nbackground-color:#FFFFFF;\nbox-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n"]);return ne=function(){return e},e}var re=y.default.div(ne()),ce=y.default.input(te()),ae=y.default.p(ee()),oe=y.default.label($(),(function(e){return e.checked?"url(".concat(X.a,")"):"url(".concat(Z.a,")")})),ie=function(e){var t=e.onChange,n=e.checked;return c.a.createElement(re,null,c.a.createElement(ae,null,"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"),c.a.createElement(oe,{checked:n[4]},c.a.createElement(ce,{type:"checkbox",name:"allTickets",value:4,onChange:t}),"\u0412\u0441\u0435"),c.a.createElement(oe,{checked:n[0]},c.a.createElement(ce,{type:"checkbox",name:"withoutStops",value:0,onChange:t}),"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),c.a.createElement(oe,{checked:n[1]},c.a.createElement(ce,{type:"checkbox",name:"oneStop",value:1,onChange:t}),"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"),c.a.createElement(oe,{checked:n[2]},c.a.createElement(ce,{type:"checkbox",name:"twoStops",value:2,onChange:t}),"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"),c.a.createElement(oe,{checked:n[3]},c.a.createElement(ce,{type:"checkbox",name:"threeStops",value:3,onChange:t}),"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"))},ue=ie;function le(){var e=Object(v.a)(["\nmargin-top: 50px;\nmargin-bottom: 50px;\n"]);return le=function(){return e},e}function se(){var e=Object(v.a)(["\ndisplay: flex;\nflex-direction: column;\n"]);return se=function(){return e},e}function fe(){var e=Object(v.a)(["\ndisplay: flex;\nmin-height: 1200px;\nflex-direction: row;\nbackground-color: #E5E5E5;\njustify-content: center;\n"]);return fe=function(){return e},e}ie.defaultProps={onChange:null,checked:!1};var de=y.default.div(fe()),pe=y.default.div(se()),he=y.default.img(le());function me(){var e=Object(v.a)(["\ncursor:pointer;\nheight:50px;\nwidth: 271px;\nfont-family: Open Sans;\nfont-style: normal;\nfont-weight: 600;\nfont-size: 12px;\ncolor : ",";\nbackground-color: ",";\nborder: ",";\nborder-radius: 5px;\n"]);return me=function(){return e},e}function ge(){var e=Object(v.a)(["\ndisplay:flex;\nflex-direction: row;\nbox-sizing: border-box;\nmargin-bottom: 20px;\n"]);return ge=function(){return e},e}var xe=y.default.div(ge()),be=y.default.button(me(),(function(e){return e.checked?"#FFFFFF":"#4A4A4A"}),(function(e){return e.checked?"#2196F3":"#FFFFFF"}),(function(e){return e.checked?"none":"1px solid #DFE5E"})),ke=function(e){var t=e.sortByPrice,n=e.sortByTime,r=e.checkByPrice,a=e.checkByTime;return c.a.createElement(xe,null,c.a.createElement(be,{onClick:t,checked:r},"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0415\u0412\u042b\u0419"),c.a.createElement(be,{onClick:n,checked:a},"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419"))},ve=ke;ke.defaultProps={sortByPrice:null,sortByTime:null,checkSortByPrice:!1,checkSortByTime:!1};var ye=n(35),Ee=n.n(ye),je={tickets:[],searchId:"",filters:[],checked:{4:!1,0:!1,1:!1,2:!1,3:!1},checkSortByPrice:!1,checkSortByTime:!1},Oe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state=je,e._searchIdUrl="https://front-test.beta.aviasales.ru/search",e._searchTickets="https://front-test.beta.aviasales.ru/tickets?searchId",e.getSearchId=Object(d.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get(e._searchIdUrl);case 2:return n=t.sent,t.next=5,e.setState((function(){return{searchId:n.data.searchId}}));case 5:case"end":return t.stop()}}),t)}))),e.getTickets=Object(d.a)(f.a.mark((function t(){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.state.searchId,console.log(n),t.next=5,b.a.get("".concat(e._searchTickets,"=").concat(n));case 5:return r=t.sent,t.next=8,e.setState((function(e){var t=e.tickets;return{tickets:[].concat(Object(l.a)(t),Object(l.a)(r.data.tickets))}}));case 8:!1===r.data.stop&&e.getTickets(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),e.getTickets();case 15:case"end":return t.stop()}}),t,null,[[0,11]])}))),e.handleCheck=function(t){var n=t.target,r=n.checked,c=n.value;if(r&&e.setState((function(e){var t=e.filters,n=e.checked;return{filters:[].concat(Object(l.a)(t),[c]),checked:Object(u.a)(Object(u.a)({},n),{},Object(i.a)({},c,!0))}})),!r){var a=e.state.filters.filter((function(e){return e!==c}));e.setState((function(e){return{filters:a,checked:Object(u.a)(Object(u.a)({},e),{},Object(i.a)({},c,!1))}}))}},e.sortByPrice=function(){var t=e.state.tickets.sort((function(e,t){return e.price>t.price?1:-1}));e.setState((function(){return{tickets:t,checkSortByPrice:!0,checkSortByTime:!1}}))},e.sortByTime=function(){var t=e.state.tickets.sort((function(e,t){return e.segments[0].duration+e.segments[1].duration>t.segments[0].duration+t.segments[1].duration?1:-1}));e.setState((function(){return{tickets:t,checkSortByPrice:!1,checkSortByTime:!0}}))},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getSearchId(),setTimeout(this.getTickets,1e3)}},{key:"render",value:function(){var e=this.state,t=e.tickets,n=e.filters,r=e.checked,a=e.checkSortByTime,o=e.checkSortByPrice;return c.a.createElement(de,null,c.a.createElement(ue,{onChange:this.handleCheck,checked:r}),c.a.createElement(pe,null,c.a.createElement(he,{src:Ee.a}),c.a.createElement(ve,{sortByPrice:this.sortByPrice,sortByTime:this.sortByTime,checkByPrice:o,checkByTime:a}),c.a.createElement(R,{tickets:t,filters:n})))}}]),n}(c.a.Component),we=n(36),Be=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(we.Normalize,null),c.a.createElement(Oe,null))};o.a.render(c.a.createElement(Be,null),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.60f20d47.chunk.js.map